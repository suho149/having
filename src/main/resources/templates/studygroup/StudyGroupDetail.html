<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/mainLayout}">

<head>
    <title th:text="${studyGroup.name} + ' - 스터디 상세'">스터디 상세</title>
    <style>
        .detail-card {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .detail-header {
            background-color: #e9ecef;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #dee2e6;
        }
        .badge-custom {
            font-size: 0.9em;
            padding: 0.5em 0.75em;
        }
    </style>
</head>
<body>

<div layout:fragment="content" class="container mt-5 mb-5">
    <div th:if="${successMessage}" class="alert alert-success" role="alert" th:text="${successMessage}"></div>
    <div th:if="${errorMessage}" class="alert alert-danger" role="alert" th:text="${errorMessage}"></div>

    <div th:if="${studyGroup}" class="card detail-card">
        <div class="card-header bg-primary text-white">
            <h2 class="mb-0" th:text="${studyGroup.name}">스터디 그룹 이름</h2>
        </div>
        <div class="card-body p-4">
            <div class="row mb-3">
                <div class="col-md-6">
                    <p><strong><i class="fas fa-user-tie me-2"></i>스터디장:</strong> <span th:text="${studyGroup.leader.nickname}">리더 닉네임</span></p>
                    <p><strong><i class="fas fa-layer-group me-2"></i>카테고리:</strong> <span th:text="${studyGroup.category}">카테고리</span></p>
                    <p><strong><i class="fas fa-users me-2"></i>정원:</strong> <span th:text="${studyGroup.currentMembersCount} + ' / ' + ${studyGroup.maxMembers} + ' 명'"></span></p>
                    <p><strong><i class="fas fa-info-circle me-2"></i>상태:</strong>
                        <span th:switch="${studyGroup.status}" class="badge rounded-pill"
                              th:classappend="${studyGroup.status == 'RECRUITING' ? 'bg-success' : (studyGroup.status == 'ACTIVE' ? 'bg-info' : 'bg-secondary')}">
                            <span th:case="'RECRUITING'">모집중</span>
                            <span th:case="'ACTIVE'">진행중</span>
                            <span th:case="'ENDED'">종료됨</span>
                            <span th:case="*">알 수 없음</span>
                        </span>
                    </p>
                </div>
                <div class="col-md-6">
                    <p><strong><i class="fas fa-map-marker-alt me-2"></i>모임 방식:</strong>
                        <span th:text="${studyGroup.locationType == 'ONLINE' ? '온라인' : '오프라인'}"></span>
                    </p>
                    <p th:if="${studyGroup.locationDetail}"><strong><i class="fas fa-link me-2"></i>장소/링크:</strong> <span th:text="${studyGroup.locationDetail}"></span></p>
                    <p><strong><i class="fas fa-calendar-alt me-2"></i>시작일:</strong> <span th:text="${#temporals.format(studyGroup.startDate, 'yyyy-MM-dd')}"></span></p>
                    <p th:if="${studyGroup.endDate}"><strong><i class="fas fa-calendar-check me-2"></i>종료일:</strong> <span th:text="${#temporals.format(studyGroup.endDate, 'yyyy-MM-dd')}"></span></p>
                </div>
            </div>

            <hr>
            <h4><i class="fas fa-file-alt me-2"></i>스터디 설명</h4>
            <p style="white-space: pre-wrap;" th:text="${studyGroup.description}">스터디 설명 내용</p>

            <hr>
            <div class="mt-4">
                <div th:if="${currentUser != null && studyGroup.leader.userId != currentUser.userId && studyGroup.status == 'RECRUITING'}">
                    <a href="#" class="btn btn-success"><i class="fas fa-user-plus me-2"></i>스터디 참여하기</a>
                </div>
                <a th:href="@{/dashboard}" class="btn btn-secondary"><i class="fas fa-arrow-left me-2"></i>대시보드로 돌아가기</a>
            </div>

        </div>
    </div>
    <div th:unless="${studyGroup}" class="alert alert-warning">
        스터디 그룹 정보를 불러올 수 없습니다.
    </div>
</div>

</body>
</html>